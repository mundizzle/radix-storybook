import{a as G,$ as V,e as Y,j as T}from"./index-b6d4726d.js";import{_ as g}from"./extends-98964cd2.js";import{r as o}from"./index-ad8e37b4.js";import{$ as y}from"./index-1b3f171e.js";import{$ as q}from"./index-25542281.js";import{$ as X}from"./index-dc32c729.js";import{$ as W}from"./index-21bbdcc0.js";import{$ as F,a as z,b as J,c as Q,d as Z}from"./index-03b17e65.js";import{$ as ee}from"./index-fc7623f3.js";import{$ as B}from"./index-c83839f6.js";import{$ as te}from"./index-cb864916.js";import{$ as oe}from"./index-f617d252.js";import{P as re}from"./react-icons.esm-e665ab3e.js";import"./_commonjsHelpers-725317a4.js";import"./index-a29557c5.js";import"./index-de5e260d.js";import"./index-6c2c353e.js";const[R,ze]=q("Tooltip",[F]),O=F(),ne="TooltipProvider",ce=700,k="tooltip.open",[ae,L]=R(ne),se=t=>{const{__scopeTooltip:r,delayDuration:e=ce,skipDelayDuration:n=300,disableHoverableContent:c=!1,children:s}=t,[i,u]=o.useState(!0),a=o.useRef(!1),p=o.useRef(0);return o.useEffect(()=>{const l=p.current;return()=>window.clearTimeout(l)},[]),o.createElement(ae,{scope:r,isOpenDelayed:i,delayDuration:e,onOpen:o.useCallback(()=>{window.clearTimeout(p.current),u(!1)},[]),onClose:o.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>u(!0),n)},[n]),isPointerInTransitRef:a,onPointerInTransitChange:o.useCallback(l=>{a.current=l},[]),disableHoverableContent:c},s)},A="Tooltip",[ie,P]=R(A),le=t=>{const{__scopeTooltip:r,children:e,open:n,defaultOpen:c=!1,onOpenChange:s,disableHoverableContent:i,delayDuration:u}=t,a=L(A,t.__scopeTooltip),p=O(r),[l,f]=o.useState(null),x=W(),d=o.useRef(0),$=i??a.disableHoverableContent,m=u??a.delayDuration,b=o.useRef(!1),[h=!1,v]=te({prop:n,defaultProp:c,onChange:M=>{M?(a.onOpen(),document.dispatchEvent(new CustomEvent(k))):a.onClose(),s==null||s(M)}}),C=o.useMemo(()=>h?b.current?"delayed-open":"instant-open":"closed",[h]),E=o.useCallback(()=>{window.clearTimeout(d.current),b.current=!1,v(!0)},[v]),w=o.useCallback(()=>{window.clearTimeout(d.current),v(!1)},[v]),I=o.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{b.current=!0,v(!0)},m)},[m,v]);return o.useEffect(()=>()=>window.clearTimeout(d.current),[]),o.createElement(z,p,o.createElement(ie,{scope:r,contentId:x,open:h,stateAttribute:C,trigger:l,onTriggerChange:f,onTriggerEnter:o.useCallback(()=>{a.isOpenDelayed?I():E()},[a.isOpenDelayed,I,E]),onTriggerLeave:o.useCallback(()=>{$?w():window.clearTimeout(d.current)},[w,$]),onOpen:E,onClose:w,disableHoverableContent:$},e))},H="TooltipTrigger",ue=o.forwardRef((t,r)=>{const{__scopeTooltip:e,...n}=t,c=P(H,e),s=L(H,e),i=O(e),u=o.useRef(null),a=G(r,u,c.onTriggerChange),p=o.useRef(!1),l=o.useRef(!1),f=o.useCallback(()=>p.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.createElement(J,g({asChild:!0},i),o.createElement(V.button,g({"aria-describedby":c.open?c.contentId:void 0,"data-state":c.stateAttribute},n,{ref:a,onPointerMove:y(t.onPointerMove,x=>{x.pointerType!=="touch"&&!l.current&&!s.isPointerInTransitRef.current&&(c.onTriggerEnter(),l.current=!0)}),onPointerLeave:y(t.onPointerLeave,()=>{c.onTriggerLeave(),l.current=!1}),onPointerDown:y(t.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:y(t.onFocus,()=>{p.current||c.onOpen()}),onBlur:y(t.onBlur,c.onClose),onClick:y(t.onClick,c.onClose)})))}),U="TooltipPortal",[pe,fe]=R(U,{forceMount:void 0}),de=t=>{const{__scopeTooltip:r,forceMount:e,children:n,container:c}=t,s=P(U,r);return o.createElement(pe,{scope:r,forceMount:e},o.createElement(B,{present:e||s.open},o.createElement(ee,{asChild:!0,container:c},n)))},_="TooltipContent",$e=o.forwardRef((t,r)=>{const e=fe(_,t.__scopeTooltip),{forceMount:n=e.forceMount,side:c="top",...s}=t,i=P(_,t.__scopeTooltip);return o.createElement(B,{present:n||i.open},i.disableHoverableContent?o.createElement(K,g({side:c},s,{ref:r})):o.createElement(xe,g({side:c},s,{ref:r})))}),xe=o.forwardRef((t,r)=>{const e=P(_,t.__scopeTooltip),n=L(_,t.__scopeTooltip),c=o.useRef(null),s=G(r,c),[i,u]=o.useState(null),{trigger:a,onClose:p}=e,l=c.current,{onPointerInTransitChange:f}=n,x=o.useCallback(()=>{u(null),f(!1)},[f]),d=o.useCallback(($,m)=>{const b=$.currentTarget,h={x:$.clientX,y:$.clientY},v=Te(h,b.getBoundingClientRect()),C=ge(h,v),E=ye(m.getBoundingClientRect()),w=Ee([...C,...E]);u(w),f(!0)},[f]);return o.useEffect(()=>()=>x(),[x]),o.useEffect(()=>{if(a&&l){const $=b=>d(b,l),m=b=>d(b,a);return a.addEventListener("pointerleave",$),l.addEventListener("pointerleave",m),()=>{a.removeEventListener("pointerleave",$),l.removeEventListener("pointerleave",m)}}},[a,l,d,x]),o.useEffect(()=>{if(i){const $=m=>{const b=m.target,h={x:m.clientX,y:m.clientY},v=(a==null?void 0:a.contains(b))||(l==null?void 0:l.contains(b)),C=!Ce(h,i);v?x():C&&(x(),p())};return document.addEventListener("pointermove",$),()=>document.removeEventListener("pointermove",$)}},[a,l,i,p,x]),o.createElement(K,g({},t,{ref:s}))}),[be,me]=R(A,{isInside:!1}),K=o.forwardRef((t,r)=>{const{__scopeTooltip:e,children:n,"aria-label":c,onEscapeKeyDown:s,onPointerDownOutside:i,...u}=t,a=P(_,e),p=O(e),{onClose:l}=a;return o.useEffect(()=>(document.addEventListener(k,l),()=>document.removeEventListener(k,l)),[l]),o.useEffect(()=>{if(a.trigger){const f=x=>{const d=x.target;d!=null&&d.contains(a.trigger)&&l()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[a.trigger,l]),o.createElement(X,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:l},o.createElement(Q,g({"data-state":a.stateAttribute},p,u,{ref:r,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),o.createElement(Y,null,n),o.createElement(be,{scope:e,isInside:!0},o.createElement(oe,{id:a.contentId,role:"tooltip"},c||n))))}),ve="TooltipArrow",he=o.forwardRef((t,r)=>{const{__scopeTooltip:e,...n}=t,c=O(e);return me(ve,e).isInside?null:o.createElement(Z,g({},c,n,{ref:r}))});function Te(t,r){const e=Math.abs(r.top-t.y),n=Math.abs(r.bottom-t.y),c=Math.abs(r.right-t.x),s=Math.abs(r.left-t.x);switch(Math.min(e,n,c,s)){case s:return"left";case c:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function ge(t,r,e=5){const n=[];switch(r){case"top":n.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":n.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":n.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":n.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return n}function ye(t){const{top:r,right:e,bottom:n,left:c}=t;return[{x:c,y:r},{x:e,y:r},{x:e,y:n},{x:c,y:n}]}function Ce(t,r){const{x:e,y:n}=t;let c=!1;for(let s=0,i=r.length-1;s<r.length;i=s++){const u=r[s].x,a=r[s].y,p=r[i].x,l=r[i].y;a>n!=l>n&&e<(p-u)*(n-a)/(l-a)+u&&(c=!c)}return c}function Ee(t){const r=t.slice();return r.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),we(r)}function we(t){if(t.length<=1)return t.slice();const r=[];for(let n=0;n<t.length;n++){const c=t[n];for(;r.length>=2;){const s=r[r.length-1],i=r[r.length-2];if((s.x-i.x)*(c.y-i.y)>=(s.y-i.y)*(c.x-i.x))r.pop();else break}r.push(c)}r.pop();const e=[];for(let n=t.length-1;n>=0;n--){const c=t[n];for(;e.length>=2;){const s=e[e.length-1],i=e[e.length-2];if((s.x-i.x)*(c.y-i.y)>=(s.y-i.y)*(c.x-i.x))e.pop();else break}e.push(c)}return e.pop(),r.length===1&&e.length===1&&r[0].x===e[0].x&&r[0].y===e[0].y?r:r.concat(e)}const _e=se,Pe=le,De=ue,Re=de,Oe=$e,ke=he,Le=()=>T.jsx(_e,{children:T.jsxs(Pe,{children:[T.jsx(De,{asChild:!0,children:T.jsx("button",{children:T.jsx(re,{})})}),T.jsx(Re,{children:T.jsxs(Oe,{sideOffset:5,children:["Add to library",T.jsx(ke,{})]})})]})}),Je={title:"Radix UI/Tooltip",component:Le},D={args:{}};var j,S,N;D.parameters={...D.parameters,docs:{...(j=D.parameters)==null?void 0:j.docs,source:{originalSource:`{
  args: {}
}`,...(N=(S=D.parameters)==null?void 0:S.docs)==null?void 0:N.source}}};const Qe=["Default"];export{D as Default,Qe as __namedExportsOrder,Je as default};
//# sourceMappingURL=index.stories-3cad982a.js.map
